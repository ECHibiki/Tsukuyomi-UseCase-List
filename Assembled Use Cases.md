# Assembled

## Moderator Tools
- Deny any actions that occure through referals (no URL into mod actions)
- Authorization levels on mod actions
- Moderator logging
- Moderator log ins
- Moderator Cookies
- Moderator brute force prevention
- Moderator log off (clear login stored data)
- Be able to disable captchas on forms
- Configure a blotter and put the blotter into an API file for each board
- Flexible combination of setting poll boards which can have no polls
- Setting a board as a Scoreboard
- Setting a board as a fileboard
- Embeds should be allowed to be spoilered from the mod UI
- Add a new poll option for rank order voting(radio, multichoice, ranked)
- Allow mods to upload or remove files in the static directory
- Modify the properties.json files which control pages
- Modify Featured pages 
- Set the message of the day txt from dash
- Edit a poll
- Edit the URLs used for scanning for IPs

- Batch actions on illegal deletes(hash, ban, delete)
- Display public files (static pages and static info)
- Display a moderator dashboard with all user controls(some hidden based on authorization level)
  - Some display info on appeals or reports 
- Stats pages 
  - Listing of site data
  - Post rates, IP activity
  - Also can do a check for disk usage across all server
  - Also can do a graph for storing data each time someone checks the stats page
- Mod site search
  - Search by:
    - Post info(IP, body, tripcodes, capcodes, names, File info)
    - Moderator notes
    - Ban list
    - Mod logs
- Board creation/edit interchangeble
  - Set URI only on create(and verify it's a valid URI name)
  - Changing names, subtitles 
  - Topic and categories
  - Pollboards, fileboards, scoreboards
-  Mod logs viewer
  - A log of actions that mods and the system perform
  - Filter actions down to specific users
  - FIlter actions to specific boards
- IP Notes
  - Have mods add or remove notes
  - Display dates, time, mod
  - List the notes for the IP
- IP Address page
  - Have a paged list of the users activity on all boards
  - Allow mod to scroll through each page of a given board
  - Display IP info/hostname
  - Ban IPs from page
- Bans
  - Add a ban using established reasons and justifications
  - IP and subnet bans
  - Not linked to a post
  - Page redirects or json
- Moderator Ban List
  - List all the bans available
  - Paged
  - Limit amount of results based on GET values and page number
  - Banlist should be searchable within this page
- List Whitelist tokens
  - Simple page listing all the token details
  - Page for creating tokens
- Alter WL Tokens
  - Create, delete and edit existing tokens
- View Ban whitelist
  - A list of regex for IPs which should bypass VPN bans
  - Post request allows for creating, editting and removing existing filters
- Report list
- Appeal list
  - On GET list all the appeals with automatic spam flags
    - Show if part of a range ban 
  - On POST may allow for: 
    - Adding the IP to a whitelist if part of a range, or removing the IP from bans if not
    - Giving a denial reason
    - Unbanning the IP range if applicable
- Mod Zombie or Lock, Bumplock, Agelock
  - Modify the thread with the flag 
  - Rebuild /all/, /board/ and all other associated pages
- Mod Sticky
    - Set the flag and bump it 
    - Or unset the flag and do not bump it
- Mod Cycle
  - Modify the thread with the given flag
  - Send a bunch of posts to the recycling bin
- Batch move (move a set of selected posts and threads)
- Batch delete
- Move reply
- Mod nerf move
- Thread move
- Ban file hash
- Ban post
  - For a public ban add a custom message to the ban object and append it to the existing post(requires page rebuild) 
  - Pub bans are stored in the DB, not the body
  - IPs should be stored in byte form
- Edit post
- True delete
- Delete file
- Spoiler file
- Unspoiler file
- Delete by IP
- User Menu
- Create User
- User list
- Rebuild pages/api/cites/markup
- Recent posts list
- Configuration display
  - Build config from the JSON configuration files. Fields have to have key, value and types, mod level
  - All existing systems from vichan
  - error codes 
  - Filter rule setting
- Create HTML files
- Data backup download 
 - Allow for the full site to be downloaded if a user inputs the master key
 - Must be authorized through email verifications
- Hide secret data from config files. 


## Server Operations
- Routing of all pages and only allowing mods into certain areas
- DB connection holding
- Simple DB access methods
- JSON file modification working on DB methods
- Create a flexible interface to create thumnails with imagemagik or another alternative
- Create exif stripping on mp4, png or jpg to only remove personal/GPS data and leave other info intact.
- /all/ does not need to be rebuilt on certain threads identified as hidden
  - Hidden needs to be a flag which prevents a board from listing in /all/, summaries and home 
- When site is run in a debug mode, all actions should be written to loggin txt files
- Spam detection runs on top of a naive bayes system
- From a list of URLs for IP scanning, do a check on each IP every N minutes
  - From the list of IPs check if they exist on the ban list and if not add them in
  - Perform rangebans on collections of IPs that fall within subnet ban threshholds
- Similarity checks done every N minutes on a system of rules
  - The check modifies the JSON and SQL data causing rebuilds
  - Algorithm rules should be easily modifiable  
- Site statistics should be ready to be used on a CDN/multi server configuration
  - Read from server data files that are updated every action inside of given servers
  - data files holding number of posts, posters and data size
- Collect banners from the banenrs program via URL fetch
  - Updates on the properties files
  - Updates on the master banners list  
- Permission levels of files themselves should be safe
- Dice rolling is dropped
 
## User Tools
- Pages for kissu UI need to be pregenerated with API information for initialization
  - HTML template with thread/page info
  - Add in the user's style for quick CSS loading 

- Recent feed, home page, all page, catalog pages... should be updated by JSON modification or SQL rebuilds
- Catalog last-update files to be updated after every json modification
- board feed to show new posts to boards or deleted posts on boards
- The removal and construction of JSON pages
- Markup parsing, preferably not with regex

- Ripping thumbnails from audio
- Converting URLs into links or board links

- Embeds should be allowed to be spoilered from post
- Submit a score for score update
- View scores on posts from the API or HTML display
- Submit a vote on a poll for radio/multi/ranked
- Thumbnail inputs on video content should set a timestamp
- A page should exist which displays user IP, Hostname, agent
- Filter systems that handle a wide range of cases
  - see filters.php for full list
  - should be set in config settings for bans, captchas and rejections
- A public ban listing for users to know what's getting banned
  - Reduced functionality
  - Show a post and the reason it was banned, the board and duration
  - No other info is needed
  - see https://4chan.org/bans as an example
  - If I need to list them all then it will be paged
- Have a page for ban check that's blocked by captcha 
- A page which takes post data and builds a ban message from it.
- Transition page for cycling between new and old UI via cookies
- Handle polling inserts
  - and deletes and creates and get data and formatting for DB insert etc.etc.etc.
- handle scores
  - and deleting the scores, verifying that they exist, fetching all the forms etc.etc.etc.
- For searching and archives have a temporary page that does the bare minimum
  - Will be replaced by hybrid archive search service later
- wl token verification and info

- Deleted/Cyclical posts should go into archival state which places files into recycling
- Deleting files are moved into recycling to be retrieved if restored. 
  - Recycled items are deleted based on last modified time.
- User deletes to be done effecting scores or polls
  - File deletions and post deletions and embed deletions
- A report page which requires a captcha
  - Block banned users from submitting
  - Have a user limit so submitting
  - Add report to the mod list
  - send emails
  - Do Spam checks
- Appeal
  - Verify existing appeal
  - Check if ban is appealable
  - Send appeal
  - Do Spam checks
  - Show user that appeal has been sent.

- On post check for board locked
- Process input post issue
  - verify errors
  - Format polls if exists
  - Set spoiler value, frame
  - check if it's an OP
  - Donor states
- Verify there's no post input flooding going on (after image verifications)
- Check up submission 
- Do ban, DNSBL, text filter, word-replaces, OCR checks, Blockhash and Board Specific checks
  - Certain triggers are bypassed if detected as moderator or VIP 
- Low mod activity checks and settings that go off if there's no mod access recorded
- Building the citations table and any other text reading database updates
- Inserting data into the database
- Inserting images in such a way that a custom CDN imageserv could be used
- Add a flood post for filter triggers
- Cyclical, bump, (no)noko and zombie handling
- Building HTML pages (also the 50 post only versions)
- Building API pages (the works from hazuki)
- Some actions should occur in the background since not all themes should be built
- The routes that the building of API or HTML pages can be varied based on the page style being used(kissu vs original ui)

- When filters are triggered, store a temp post to the DB with the tmp file stored somewhere
- Captcha release to verify captchas sent
- On captcha release pull out a stored image and data
  - Will have to perform OCR checks and do a hard reject on fail
  - Text filters should all be pre verified
- On release do the post-filter actions of standard posting. 
- On release, queue captchas done by given IPs(prevent significant post-no flooding)
